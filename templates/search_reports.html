<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pool Scout Pro - Sacramento County Pool Inspection Reports</title>
  <meta name="description" content="Sacramento County pool inspection reports search and management system">
  <link rel="stylesheet" href="/static/css/search_reports.css">
  <script src="/static/js/vendor/lucide.js"></script>
</head>
<body>
  <nav class="navbar-modern" role="navigation" aria-label="Main navigation">
      <div class="nav-container-modern">
          <div class="nav-brand-modern">
              <div class="brand-icon">
                  <i data-lucide="waves" class="brand-icon-svg" aria-hidden="true"></i>
              </div>
              <div class="brand-text">
                  <h1>Pool Scout Pro</h1>
                  <span class="brand-subtitle">Sacramento County</span>
              </div>
          </div>
          <ul class="nav-menu-modern" role="menubar">
              <li class="nav-item-modern" role="none"><a href="/reports" class="nav-link-modern active" role="menuitem" aria-current="page"><div class="nav-icon"><i data-lucide="file-text" class="nav-icon-svg" aria-hidden="true"></i></div><span class="nav-text">Reports</span><div class="nav-indicator" aria-hidden="true"></div></a></li>
              <li class="nav-item-modern" role="none"><a href="/dashboard" class="nav-link-modern" role="menuitem"><div class="nav-icon"><i data-lucide="bar-chart-3" class="nav-icon-svg" aria-hidden="true"></i></div><span class="nav-text">Analytics</span><div class="nav-indicator" aria-hidden="true"></div></a></li>
              <li class="nav-item-modern" role="none"><a href="/business" class="nav-link-modern" role="menuitem"><div class="nav-icon"><i data-lucide="building-2" class="nav-icon-svg" aria-hidden="true"></i></div><span class="nav-text">Business</span><div class="nav-indicator" aria-hidden="true"></div></a></li>
          </ul>
          <button class="nav-toggle-modern" aria-label="Toggle navigation menu" aria-expanded="false"><div class="hamburger-modern"><span class="hamburger-line" aria-hidden="true"></span><span class="hamburger-line" aria-hidden="true"></span><span class="hamburger-line" aria-hidden="true"></span></div></button>
      </div>
  </nav>

  <main class="container" role="main">
      <section class="search-and-header-container" aria-label="Search controls and results summary">
          <div class="search-controls">
              <div class="search-controls-header">
                  <div class="header-left">
                      <h2 id="search-title">Report Search</h2>
                      <div class="search-form" role="search">
                          <label for="searchDate" class="sr-only">Search date</label>
                          <input type="date" id="searchDate" class="form-control-refined" aria-describedby="date-help" required>
                          <span id="date-help" class="sr-only">Select inspection date to search for reports</span>
                          <button id="searchButton" class="btn btn-primary search-btn-refined" type="button" aria-describedby="search-status"><i data-lucide="search" aria-hidden="true"></i><span>Search</span></button>
                          <input type="hidden" id="purposeSelect" value="inspection">
                      </div>
                  </div>
              </div>
              <div class="results-summary" role="status" aria-live="polite">
                  <div class="results-left">
                      <div class="results-count"><span>Unsaved:</span><span id="results-count">0</span></div>
                      <div class="results-count"><span>Saved:</span><span id="on-file-count">0</span></div>
                      <div class="search-date"><span>Date:</span><span id="current-search-date">-</span></div>
                  </div>
                  <div id="header-progress" class="header-progress" style="display: none;"><div class="progress-inline"><div id="header-message"></div><div id="header-activity" style="display: none;"><i data-lucide="loader" class="activity-icon spin"></i><span class="activity-percent"></span></div></div></div>
              </div>
          </div>
          <div class="table-header-container">
              <table class="table table-header-only" role="table" aria-label="Reports table header">
                  <thead>
                      <tr role="row">
                          <th scope="col" id="col-number">#</th>
                          <th scope="col" id="col-type">Type</th>
                          <th scope="col" id="col-facility">Facility</th>
                          <th scope="col" id="col-findings">Findings</th>
                      </tr>
                  </thead>
              </table>
          </div>
      </section>

      <section class="results-container" aria-label="Search results">
          <div class="table-responsive">
              <table class="table table-striped table-body-only" role="table" aria-label="Inspection reports data">
                  <tbody id="reports-table-body" role="rowgroup">
                      <tr class="no-results" role="row"><td colspan="4" class="text-center text-muted"><div class="no-results-content"><p>üîç No search performed yet</p><p class="help-text">Select a date and click Search to find inspection reports</p></div></td></tr>
                  </tbody>
              </table>
          </div>
      </section>
  </main>
  
  <footer class="page-footer" role="contentinfo">
      <div class="footer-content">
          <p>&copy; 2025 Pool Scout Pro | Sacramento County Pool Inspection Tool</p>
      </div>
  </footer>

  <style>
      .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }
      .help-text { font-size: 14px; margin-top: 8px; opacity: 0.7; }
      .table { table-layout: fixed; width: 100%; }
      #col-number, #reports-table-body td:nth-child(1) { width: 5%; }
      #col-type, #reports-table-body td:nth-child(2) { width: 5%; }
      #col-facility, #reports-table-body td:nth-child(3) { width: 40%; }
      #col-findings, #reports-table-body td:nth-child(4) { width: 50%; }
      .findings-list ul { margin: 0; padding-left: 0; list-style-type: none; }
      .findings-list .finding-item { color: inherit; font-size: 12px; line-height: 1.4; margin-bottom: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
      .findings-more-info { color: #6b7280; font-size: 11px; margin-top: 4px; text-align: right; }

      /* --- Report Modal Styles --- */
      .report-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1050; display: flex; align-items: center; justify-content: center; }
      .report-modal-content { background: #fff; border-radius: 8px; max-width: 800px; width: 90%; max-height: 90vh; display: flex; flex-direction: column; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
      .report-modal-header { display: flex; justify-content: space-between; align-items: flex-start; padding: 16px 24px; border-bottom: 1px solid #e9ecef; }
      .report-modal-header .facility-name { margin: 0; font-size: 1.5rem; }
      .report-modal-header .facility-address { margin: 4px 0 0; color: #6c757d; }
      .report-modal-header .close-button { font-size: 2rem; font-weight: 700; line-height: 1; color: #000; text-shadow: 0 1px 0 #fff; opacity: .5; background: transparent; border: 0; cursor: pointer; padding: 0; }
      .report-modal-body { padding: 24px; overflow-y: auto; }
      .report-modal-section { margin-bottom: 24px; }
      .report-modal-section h3 { margin-top: 0; margin-bottom: 12px; border-bottom: 1px solid #dee2e6; padding-bottom: 8px; }
      .report-modal-section ul { list-style-type: none; padding-left: 0; }
      .report-modal-section li { margin-bottom: 8px; }
      .violations-list .violation-item { margin-bottom: 12px; padding-left: 12px; border-left: 3px solid #6c757d; }
      .violations-list .violation-summary { display: block; font-weight: 600; }
      .violations-list .violation-observation { margin-top: 4px; color: #495057; font-size: 0.9em; }
      .report-notes { white-space: pre-wrap; word-wrap: break-word; font-family: monospace; background: #f8f9fa; padding: 12px; border-radius: 4px; }
  </style>

  <script>
      window.poolScoutPro = { config: { apiBase: '/api/v1' } };
  </script>

  <!-- Core modules first -->
  <script src="/static/js/core/utilities.js"></script>
  <script src="/static/js/core/api-client.js"></script>
  <script src="/static/js/core/ui-manager.js"></script>
  <script src="/static/js/core/page-state-service.js"></script>
  <script src="/static/js/core/violation-modal.js"></script>
  <script src="/static/js/core/report-modal.js"></script>

  <!-- Download modules -->
  <script src="/static/js/downloads/download-service.js"></script>
  <script src="/static/js/downloads/download-ui.js"></script>
  <script src="/static/js/downloads/download-poller.js"></script>

  <!-- Search modules -->
  <script src="/static/js/search/search-service.js"></script>
  <script src="/static/js/search/search-ui.js"></script>

  <!-- Main application -->
  <script src="/static/js/main.js"></script>

  <script>
      document.addEventListener('DOMContentLoaded', function() {
          if (typeof lucide !== 'undefined') {
              lucide.createIcons();
          }
      });
  </script>
</body>
</html>
